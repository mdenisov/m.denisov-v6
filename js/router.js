// Generated by CoffeeScript 1.6.3
define(function(require, exports, module) {
  "use strict";
  var $, Backbone, PubSub, app;
  $ = require("jquery");
  Backbone = require("backbone");
  app = require("app");
  PubSub = require("pubsub");
  return Backbone.Router.extend({
    routes: {
      '*path': 'someRoute'
    },
    someRoute: function(path) {
      var ajaxPromise;
      if (path == null) {
        path = '';
      }
      ajaxPromise = $.Deferred(function(deferred) {
        var href;
        href = app.baseUrl + path;
        return $.ajax(href, {
          type: 'GET',
          dataType: 'html',
          error: function(jqXHR, textStatus, errorThrown) {
            console.log("AJAX Error: " + textStatus);
            return deferred.fail(textStatus);
          },
          success: function(data, textStatus, jqXHR) {
            return deferred.resolve(data);
          }
        });
      }).promise();
      ajaxPromise.done(function(html) {
        return PubSub.trigger('app:loaded', html);
      });
      return ajaxPromise.fail(function(error) {
        return console.log(error);
      });
    }
  });
});
